!function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=11)}({11:function(e,t){jQuery(document).ready(function(e){function t(e){for(var t=window.location.search.substring(1),n=t.split("&"),r=0;r<n.length;r++){var i=n[r].split("=");if(i[0]==e)return i[1]}}function n(e,t){return void 0===t||0==+t?Math.round(e):(e=+e,t=+t,isNaN(e)||"number"!=typeof t||t%1!=0?NaN:(e=e.toString().split("e"),e=Math.round(+(e[0]+"e"+(e[1]?+e[1]+t:t))),e=e.toString().split("e"),+(e[0]+"e"+(e[1]?+e[1]-t:-t))))}function r(e){alert(e)}function i(t,n){e.post(u+"shapeshift.io/mail",{email:t,txid:n}).done(function(e){if(e.error){e.error}else{e.email.message}}).error(function(e){"I'm busy right now, sorry."==e.error&&setTimeout(function(){i(t,n)},3e3)})}function o(t){e(".ssio-limit, .ssio-exchange-rate").fadeIn();var i=t,o="btc_"+i;e(".exchange-rate p").html(l),e(".deposit-limit p").html(l),e("#shapeshift-lens-modal .ssio-more-options").show(),e.get(u+"shapeshift.io/rate/"+o,function(t){if(t.error)return void r("ShapeShift API returned an error: "+t.error);var a=t.rate,s=n(a,2);e(".exchange-rate p").text("1 BTC = "+s+" "+i.toUpperCase()),e.get(u+"shapeshift.io/limit/"+o,function(t){if(t.error)return void r(t.error);var n=t.limit;p=(n*a).toFixed(4),e(".deposit-limit p").text(p+" "+i.toUpperCase())})})}function a(t){e("#shapeshift-lens-modal .pay-with").fadeOut(),"---"!==t&&"btc"!==t&&(e(".coin-container .coin").html('<img src="'+m[t.toUpperCase()].imgUrl+'" width="100px"/>'),e(".deposit-limit, .exchange-rate, .return-address-input, .email-input").fadeIn(),o(t)),"btc"==t&&e(".deposit-limit, .exchange-rate, .return-address-input, .email-input").fadeOut(),"---"==t&&e(".coin-container .coin").html("")}function s(){var t=e("#withdraw-address").val();amount=e("#amount").val(),currency=e(".ssio-currency-dropdown").val(),altcoin_name=m[currency.toUpperCase()].name,bitcoin_icon=m.BTC.icon,qrstring=altcoin_name.toLowerCase()+":"+t;var n="";amount?(qrstring=altcoin_name.toLowerCase()+":"+t+"?amount="+amount,n="Send "+amount+" "+bitcoin_icon+" BTC to <br><span class='depo-address'>"+t+"</span>"):n="Send "+bitcoin_icon+" BTC to <br><span class='depo-address'>"+t+"</span>",e(".instructions").find(".first").html(n),e(".input-form").fadeOut("normal",function(){e(this).remove(),e(".instructions").fadeIn()}),new QRCode(document.getElementById("qr-code"),qrstring),e(".coin").fadeOut("normal",function(){e(this).hide(),e("#qr-code").fadeIn()})}function c(t){var n=d,o=e("#return-address").val(),a=e(".ssio-currency-dropdown").val(),s=m[a.toUpperCase()].name,c=m[a.toUpperCase()].icon,l=(m.BTC.icon,e("#email").val()),f=a+"_btc",v=e("#amount").val();v?(url="shapeshift.io/sendamount",data={withdrawal:n,pair:f,amount:v,returnAddress:o,hash:hash}):(data={withdrawal:n,pair:f,hash:hash},url="shapeshift.io/shift");var h=baseUrl+"/account/deposit/shapeshift_query";UQAJAX.post({url:h,data:data,reloadUserBalances:!0,success:function(t){if(t.error)return void r(t.error);var n=null,o=null,a=600;if(e(".timer").countdown(Date.now()+1e3*a,function(t){a--,e(this).text(t.strftime("%M min %S sec")+" until expiration"),t.elapsed&&e(this).text("Your payment is still accepted.")}),t.success){var d="",m="";if("xmr_btc"==t.success.pair?(d=t.success.sAddress,m=t.success.deposit):d=t.success.deposit,"xrp_btc"==t.success.pair){var f=d.split("?dt=");d=f[0],m=f[1]}var n=t.success.depositAmount;o=t.success.expiration}else var d=t.deposit;t.depositType;if(n)var v="<b>"+n+"</b> ";else var v="up to <b>"+p+"</b>";var h="Send "+v+" "+c+" "+s+" to <br><span class='depo-address'>"+d+"</span>";if(m&&(h+="<br><br> Destination tag:<br><span class='depo-address'>"+m+"</span>",h+="<br><span style='font-size:11px;'>( Don't forget to input destination tag. Otherwise, you may lose money. )</span>"),n);else;e("#instructions-msg").html(h);var g=d;n&&(g=s.toLowerCase()+":"+d+"?amount="+n),new QRCode(document.getElementById("qr-code"),g),e(".input-form").fadeOut("normal",function(){e(this).remove(),e(".instructions").fadeIn()}),e(".coin").fadeOut("normal",function(){e(this).hide(),e("#qr-code").fadeIn()});var w=0;interval_id=setInterval(function(){if(w%8==0&&e.get(u+"shapeshift.io/txStat/"+d,{timeout:4500}).done(function(t){var n=t.status;if("no_deposits"==n)e("#steps #deposit").addClass("active");else if("received"==n)e("#steps #deposit").removeClass("pending").addClass("good"),e("#exchange").addClass("active"),o=null;else{if("complete"==n){var a=(t.incomingType,t.incomingCoin,t.outgoingCoin,t.withdraw,t.transaction);return e("#exchange").removeClass("pending").addClass("good"),e("#complete").removeClass("pending").addClass("good"),e(".status-window").addClass("complete"),l&&i(l,a),clearInterval(interval_id),void(o=null)}if("failed"==n)return r("ShapeShift.io API returned an error: "+t.error),void clearInterval(interval_id)}}),a||o){var t=a||((o-new Date)/1e3).toFixed(0),n=0;if(t>59){var s=Math.floor(t/60);n=t-60*s,n<10&&(n="0"+n),s+":"+n}else t<10&&(n="0"+t),"0:"+n;if(!(t>0))return void clearInterval(interval_id)}else e(".timer").text("");w++},1e3)},error:function(e){if(e.error)return void r(e.error)}})}var d=t("destination");pre_amount=t("amount"),d&&e("#withdraw-address").val(d),pre_amount&&e("#amount").val(pre_amount),e(".ssio-currency-dropdown").val("---");var u="https://",l='<div class="spinner"><div class="bounce1"></div><div class="bounce2"></div><div class="bounce3"></div></div>',p="",m={};e(".ssio-currency-dropdown").msDropDown(),e(".form-submit").click(function(){if("---"!==e(".ssio-currency-dropdown").val()&&"btc"!==e(".ssio-currency-dropdown").val()){var t=e("#return-address").val();if(0==e.trim(t).length)return alert("Return Address is required."),!1;var n=e(".ssio-currency-dropdown").val();0==e("#amount").val().length&&window.setInterval(function(){o(n)},3e4),c(),e(".status-window").show()}"btc"==e(".ssio-currency-dropdown").val()&&s()}),e.getJSON("https://shapeshift.io/getcoins",function(t){e.each(t,function(e,t){""!=specificType?"available"!=t.status||specificType!=t.symbol.toUpperCase()&&"BTC"!=t.symbol.toUpperCase()||(m[t.symbol]={symbol:t.symbol,name:t.name,icon:"<img src='"+t.image+"' />",imgUrl:t.image}):"available"==t.status&&(m[t.symbol]={symbol:t.symbol,name:t.name,icon:"<img src='"+t.image+"' />",imgUrl:t.image})});var n=e(".ssio-currency-dropdown").msDropDown().data("dd");e.each(m,function(e,t){"BTC"!=e&&n.add({text:t.name,value:e.toLowerCase(),image:t.imgUrl})}),n.on("change",function(t){a(e(t.target).val())}),""!=specificType&&(n.set("selectedIndex",1),a(specificType.toLowerCase()))})})}});